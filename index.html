<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Similar Photos Review</title>
    <style>
        /* =========================================
           1. èƒŒæ™¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
           ========================================= */
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            /* æ—¢å­˜ã®å˜è‰²èƒŒæ™¯ã‚’å‰Šé™¤ã—ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š */
            /* background: #f8f9fa; */
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite; /* 15ç§’ã‹ã‘ã¦å¤‰åŒ–ã—ç¶šã‘ã‚‹ */
            
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh; /* ç”»é¢å…¨ä½“ã‚’è¦†ã†ã‚ˆã†ã«è¨­å®š */
        }

        /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ãã‚’å®šç¾© */
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Header Section --- */
        header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.1); /* åŒºåˆ‡ã‚Šç·šã‚’å°‘ã—é€æ˜ã« */
        }

        .title-image {
            height: 60px;
            width: auto;
            object-fit: contain;
            /* ã‚¿ã‚¤ãƒˆãƒ«ç”»åƒã«ã‚‚å°‘ã—å½±ã‚’ã¤ã‘ã¦æµ®ãä¸ŠãŒã‚‰ã›ã‚‹ */
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        h1 {
            font-size: 2rem;
            margin: 0;
            color: #fff; /* èƒŒæ™¯ã«åˆã‚ã›ã¦æ–‡å­—è‰²ã‚’ç™½ã«å¤‰æ›´ */
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3); /* æ–‡å­—ãŒè¦‹ã‚„ã™ã„ã‚ˆã†ã«å½±ã‚’è¿½åŠ  */
        }

        /* --- Methodology Toggle --- */
        .method-toggle-container {
            width: 100%;
            max-width: 800px;
            text-align: right;
            margin-bottom: 10px;
        }
        .method-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.8); /* ãƒœã‚¿ãƒ³ã®è‰²ã‚’èª¿æ•´ */
            cursor: pointer;
            font-size: 0.9rem;
            text-decoration: underline;
        }
        .method-btn:hover { color: #fff; }

        .methodology-box {
            display: none;
            background: rgba(255, 255, 255, 0.95); /* å°‘ã—é€éã•ã›ã‚‹ */
            padding: 20px;
            max-width: 800px;
            border-left: 4px solid #3498db;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 8px; /* è§’ä¸¸ã‚’è¿½åŠ  */
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(-5px)} to{opacity:1;transform:translateY(0)} }

        /* --- Category Tabs --- */
        .genre-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
        }
        .genre-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.8); /* ãƒœã‚¿ãƒ³ã‚’åŠé€æ˜ã« */
            border: none; /* æ ç·šã‚’å‰Šé™¤ */
            border-radius: 20px;
            cursor: pointer;
            color: #555;
            font-weight: bold;
            transition: 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .genre-btn:hover { background: #fff; }
        .genre-btn.active {
            background: #2c3e50;
            color: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* --- Gallery List Area --- */
        #gallery-list {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 40px;
            padding-bottom: 40px;
        }

        /* --- Individual Photo Card --- */
        .photo-card {
            background: #fff;
            border-radius: 12px; /* è§’ä¸¸ã‚’å¼·ã */
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); /* å½±ã‚’å¼·èª¿ */
            overflow: hidden;
            border: none; /* æ ç·šã‚’å‰Šé™¤ */
        }

        /* Card Header */
        .card-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fdfdfd;
            border-bottom: 1px solid #eee;
        }
        .card-number {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.1rem;
            color: #2c3e50;
        }
        .toggle-frame-btn {
            padding: 6px 12px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: 0.2s;
        }
        .toggle-frame-btn:hover { background: #219150; }
        .toggle-frame-btn.active { background: #e74c3c; }

        /* Image Area */
        .image-wrapper {
            position: relative;
            width: 100%;
            background: #ecf0f1;
        }
        .main-image {
            width: 100%;
            display: block;
        }

        /* Hotspots */
        .hotspot {
            position: absolute;
            cursor: pointer;
            border: 3px solid;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            display: none;
            transition: 0.2s;
            box-shadow: 0 0 5px rgba(0,0,0,0.3); /* æ ãŒè¦‹ã‚„ã™ã„ã‚ˆã†ã«å½±è¿½åŠ  */
        }
        .hotspot:hover {
            background: rgba(255,255,255,0.3);
            box-shadow: 0 0 15px rgba(255,255,255,0.8);
        }

        /* Description Box */
        .desc-box {
            padding: 25px;
            display: none;
            border-top: 3px solid #ddd; /* ç·šã®å¤ªã•ã‚’å¤‰æ›´ */
            background: #fff;
        }
        .desc-title { font-size: 1.3rem; font-weight: bold; margin-bottom: 10px; display: block; }

        /* =========================================
           2. èª­ã¿ä¸Šã’ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ 
           ========================================= */
        .speak-container {
            display: flex;
            align-items: flex-start; /* ä¸Šæƒãˆ */
            gap: 10px;
            margin-bottom: 5px;
        }
        .eng-text {
            font-size: 1.1rem;
            color: #222;
            flex-grow: 1; /* ãƒ†ã‚­ã‚¹ãƒˆãŒã‚¹ãƒšãƒ¼ã‚¹ã‚’åŸ‹ã‚ã‚‹ */
            line-height: 1.4;
        }
        .speak-btn {
            background: none;
            border: 2px solid #eee;
            color: #2c3e50;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
            flex-shrink: 0; /* ãƒœã‚¿ãƒ³ãŒæ½°ã‚Œãªã„ã‚ˆã†ã« */
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }
        .speak-btn:hover {
            background-color: #2c3e50;
            color: #fff;
            border-color: #2c3e50;
        }
        .speak-btn:active {
            transform: scale(0.95);
        }
        /* ========================================= */

        .jp-text { font-size: 0.9rem; color: #666; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px dashed #ddd; }

        /* Learning Grid */
        .learning-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .learning-grid { grid-template-columns: 1fr; } header { flex-direction: column; text-align: center; } h1 { font-size: 1.5rem; } }
        
        .learn-item h4 { margin: 0 0 5px 0; font-size: 0.8rem; color: #95a5a6; text-transform: uppercase; }
        .learn-item ul { margin: 0; padding-left: 20px; font-size: 0.9rem; }
        .learn-item li { margin-bottom: 3px; }

    </style>
</head>
<body>

    <header>
        <img src="title.png" alt="App Icon" class="title-image" onerror="this.style.display='none'">
        <h1>Similar Photos Review</h1>
    </header>

    <div class="method-toggle-container">
        <button class="method-btn" onclick="toggleMethod()">â“˜ About This Method</button>
    </div>
    <div id="method-box" class="methodology-box">
        <p style="margin:0; font-size:0.95rem; line-height:1.6; color:#555;">
            <strong>Why This Method Works:</strong><br>
            æ­£ç¢ºãªæå†™åŠ›ã¯ã€ä¼šè©±åŠ›ã®è¦ã§ã™ã€‚ã€ŒSimilar Photos Reviewã€ã¯ã€è¦‹ãŸã‚‚ã®ã‚’æ­£ç¢ºã«è¨€èªåŒ–ã—ã€ç›¸æ‰‹ã«ä¼ãˆã‚‹åŠ›ã‚’é¤Šã„ã¾ã™ã€‚
            è¦–è¦šæƒ…å ±ã¨è¨€èªã‚’çµã³ã¤ã‘ã‚‹ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€è¨˜æ†¶ã«å®šç€ã—ã‚„ã™ãã€å®Ÿè·µçš„ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã‚’é«˜ã‚ã‚‹éå¸¸ã«åŠ¹æœçš„ãªå­¦ç¿’æ³•ã§ã™ã€‚
        </p>
    </div>

    <div class="genre-tabs">
        <button class="genre-btn active" onclick="renderCategory(0)">000 Series</button>
        <button class="genre-btn" onclick="renderCategory(1)">100 Series</button>
        <button class="genre-btn" onclick="renderCategory(2)">200 Series</button>
        <button class="genre-btn" onclick="renderCategory(3)">300 Series</button>
        <button class="genre-btn" onclick="renderCategory(4)">400 Series</button>
        <button class="genre-btn" onclick="renderCategory(5)">500 Series</button>
    </div>

    <div id="gallery-list">
        </div>

    <script>
        // ============================================
        // â˜…ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒªã‚¢ (ãƒ•ã‚¡ã‚¤ãƒ«åã¯ã™ã¹ã¦ .png)
        // ============================================
        const galleryData = [
            {
                imageFile: "001.png", 
                spots: [
                    {
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#3498db",
                        title: "Center: A Pair of Penguins",
                        eng: "Two penguins are standing side by side in the central cubby.",
                        jp: "ä¸­å¤®ã®å°éƒ¨å±‹ã«2ç¾½ã®ãƒšãƒ³ã‚®ãƒ³ãŒä¸¦ã‚“ã§ç«‹ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["cubby (æ£šã®åŒºç”»)", "side by side (ä¸¦ã‚“ã§)", "central (ä¸­å¤®ã®)"],
                        idioms: ["stick together (ä¸€ç·’ã«ã„ã‚‹)"],
                        synonyms: ["duo (pair)"],
                        grammar: "ä½ç½®ã‚’è¡¨ã™å‰ç½®è© 'in' ã¨ã€çŠ¶æ…‹ã‚’è¡¨ã™ç¾åœ¨é€²è¡Œå½¢ 'are standing' ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚"
                    },
                    {
                        top: "69%", left: "3%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Bottom-Left: A Solitary Rabbit",
                        eng: "A brown rabbit sits alone in the bottom-left section.",
                        jp: "èŒ¶è‰²ã®ã‚¦ã‚µã‚®ãŒå·¦ä¸‹ã®åŒºç”»ã«ä¸€åŒ¹ã§åº§ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["solitary (å˜ç‹¬ã®)", "section (åŒºç”»)", "bottom-left (å·¦ä¸‹)"],
                        idioms: ["lone wolf (ä¸€åŒ¹ç‹¼)"],
                        synonyms: ["alone (solitary)"],
                        grammar: "å ´æ‰€ã‚’æŒ‡ã™å‰¯è©å¥ 'in the bottom-left section' ãŒæ–‡æœ«ã«æ¥ã¦ã„ã¾ã™ã€‚"
                    }
                ]
            },
            {
                imageFile: "002.png", 
                spots: [
                    {
                        top: "36%", left: "3%", width: "28%", height: "28%", color: "#95a5a6",
                        title: "Left: A Koala",
                        eng: "A grey koala is sitting to the left of the penguins.",
                        jp: "ç°è‰²ã®ã‚³ã‚¢ãƒ©ãŒãƒšãƒ³ã‚®ãƒ³ã®å·¦å´ã«åº§ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["to the left of (ï½ã®å·¦å´ã«)", "grey (ç°è‰²ã®)"],
                        idioms: ["sit tight (ã˜ã£ã¨ã—ã¦ã„ã‚‹)"],
                        synonyms: ["beside (next to)"],
                        grammar: "ç›¸å¯¾çš„ãªä½ç½®é–¢ä¿‚ã‚’ç¤ºã™ 'to the left of' ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚"
                    },
                    {
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#3498db",
                        title: "Center: Sandwiched Penguins",
                        eng: "The penguin pair is sandwiched between the koala and the dog.",
                        jp: "ãƒšãƒ³ã‚®ãƒ³ã®ãƒšã‚¢ã¯ã€ã‚³ã‚¢ãƒ©ã¨çŠ¬ã®é–“ã«æŒŸã¾ã‚Œã¦ã„ã¾ã™ã€‚",
                        vocab: ["sandwiched (æŒŸã¾ã‚ŒãŸ)", "between (ï½ã®é–“)"],
                        idioms: ["caught in the middle (æ¿æŒŸã¿ã«ãªã‚‹)"],
                        synonyms: ["surrounded (enclosed)"],
                        grammar: "å—å‹•æ…‹ 'is sandwiched' ã‚’ä½¿ã„ã€æŒŸã¾ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã‚’å¼·èª¿ã—ã¦ã„ã¾ã™ã€‚"
                    },
                    {
                        top: "36%", left: "69%", width: "28%", height: "28%", color: "#f1c40f",
                        title: "Right: A Golden Retriever",
                        eng: "A happy-looking dog sits on the far right side of the middle row.",
                        jp: "å¹¸ã›ãã†ãªçŠ¬ãŒã€ä¸­æ®µã®å³ç«¯ã«åº§ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["middle row (ä¸­æ®µ)", "far right (å³ç«¯)"],
                        idioms: ["man's best friend (çŠ¬)"],
                        synonyms: ["canine (dog)"],
                        grammar: "è¤‡åˆå½¢å®¹è© 'happy-looking' ãŒåè© dog ã‚’ä¿®é£¾ã—ã¦ã„ã¾ã™ã€‚"
                    }
                ]
            },
            {
                imageFile: "003.png", 
                spots: [
                    {
                        top: "3%", left: "3%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Top-Left: An Orange Tabby",
                        eng: "An orange tabby cat is sitting in the top-left compartment.",
                        jp: "ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®ãƒˆãƒ©çŒ«ãŒå·¦ä¸Šã®åŒºç”»ã«åº§ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["tabby (ãƒˆãƒ©çŒ«)", "compartment (ä»•åˆ‡ã‚Š)"],
                        idioms: ["cat nap (ã†ãŸãŸå¯)"],
                        synonyms: ["feline (cat)"],
                        grammar: "å ´æ‰€ã‚’ç‰¹å®šã™ã‚‹ 'top-left' ã¨ã„ã†è¡¨ç¾ã§ã™ã€‚"
                    },
                    {
                        top: "3%", left: "36%", width: "28%", height: "28%", color: "#2c3e50",
                        title: "Top-Center: A Zebra",
                        eng: "A zebra stands next to the cat in the top row.",
                        jp: "æœ€ä¸Šæ®µã§ã€ã‚·ãƒã‚¦ãƒãŒçŒ«ã®éš£ã«ç«‹ã£ã¦ã„ã¾ã™ã€‚",
                        vocab: ["top row (æœ€ä¸Šæ®µ)", "next to (ï½ã®éš£ã«)"],
                        idioms: ["change one's stripes (æ€§æ ¹ã‚’å¤‰ãˆã‚‹)"],
                        synonyms: ["adjacent (next to)"],
                        grammar: "å‹•è© 'stands' ã¨å ´æ‰€ 'next to' ã®çµ„ã¿åˆã‚ã›ã€‚"
                    },
                    {
                        top: "69%", left: "69%", width: "28%", height: "28%", color: "#e74c3c",
                        title: "Bottom-Right: Diagonal Position",
                        eng: "The rabbit is placed in the bottom-right corner, far away from the others.",
                        jp: "ã‚¦ã‚µã‚®ã¯å³ä¸‹ã®éš…ã«é…ç½®ã•ã‚Œã€ä»–ã®å‹•ç‰©ã‹ã‚‰ã¯é›¢ã‚Œã¦ã„ã¾ã™ã€‚",
                        vocab: ["corner (éš…)", "far away (é ãé›¢ã‚Œã¦)"],
                        idioms: ["miles away (å¿ƒã“ã“ã«ã‚ã‚‰ãš)"],
                        synonyms: ["distant (far)"],
                        grammar: "å—å‹•æ…‹ 'is placed' ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚"
                    }
                ]
            },
            {
                imageFile: "004.png", 
                spots: [
                    {
                        top: "3%", left: "3%", width: "28%", height: "28%", color: "#2c3e50",
                        title: "Start: Top-Left",
                        eng: "The zebra starts the diagonal line from the top-left corner.",
                        jp: "ã‚·ãƒã‚¦ãƒãŒå·¦ä¸Šã®éš…ã‹ã‚‰æ–œã‚ã®ãƒ©ã‚¤ãƒ³ã‚’å§‹ã‚ã¦ã„ã¾ã™ã€‚",
                        vocab: ["diagonal (æ–œã‚ã®)", "line (ç·š)"],
                        idioms: ["start off (å§‹ã‚ã‚‹)"],
                        synonyms: ["begin (start)"],
                        grammar: "èƒ½å‹•æ…‹ã® 'starts' ã‚’ä½¿ã„ã€ã‚·ãƒã‚¦ãƒãŒåˆ—ã®å§‹ç‚¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚"
                    },
                    {
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Middle: Center Spot",
                        eng: "The cat occupies the exact center of the grid.",
                        jp: "çŒ«ãŒã‚°ãƒªãƒƒãƒ‰ã®ã¡ã‚‡ã†ã©ä¸­å¿ƒã‚’å ã‚ã¦ã„ã¾ã™ã€‚",
                        vocab: ["occupy (å ã‚ã‚‹)", "exact (æ­£ç¢ºãª)", "grid (æ ¼å­)"],
                        idioms: ["dead center (ã©çœŸã‚“ä¸­)"],
                        synonyms: ["inhabit (occupy)"],
                        grammar: "å‹•è© 'occupy' ã¯ç©ºé–“ã‚„åœ°ä½ã‚’å ã‚ã‚‹éš›ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚"
                    },
                    {
                        top: "69%", left: "69%", width: "28%", height: "28%", color: "#e74c3c",
                        title: "End: Bottom-Right",
                        eng: "The rabbit completes the diagonal alignment in the bottom-right.",
                        jp: "ã‚¦ã‚µã‚®ãŒå³ä¸‹ã§æ–œã‚ã®é…ç½®ã‚’å®Œæˆã•ã›ã¦ã„ã¾ã™ã€‚",
                        vocab: ["complete (å®Œæˆã•ã›ã‚‹)", "alignment (æ•´åˆ—)"],
                        idioms: ["tie up loose ends (ä»•ä¸Šã’ã‚‹)"],
                        synonyms: ["finish (complete)"],
                        grammar: "ä¸»èª(Rabbit) + å‹•è©(completes) + ç›®çš„èª(alignment) ã§ã™ã€‚"
                    }
                ]
            },
            {
                imageFile: "005.png", 
                spots: [
                    {
                        top: "20%", left: "5%", width: "30%", height: "60%", color: "#c0392b",
                        title: "Two Bottles of Cola",
                        eng: "There are two identical bottles of zero-sugar cola on the left.",
                        jp: "å·¦å´ã«ã€ã‚¼ãƒ­ã‚·ãƒ¥ã‚¬ãƒ¼ã‚³ãƒ¼ãƒ©ã®å…¨ãåŒã˜ãƒœãƒˆãƒ«ãŒ2æœ¬ã‚ã‚Šã¾ã™ã€‚",
                        vocab: ["identical (å…¨ãåŒã˜)", "zero-sugar (ç„¡ç³–)"],
                        idioms: ["seeing double (äºŒé‡ã«è¦‹ãˆã‚‹)"],
                        synonyms: ["duplicate (copy)"],
                        grammar: "å­˜åœ¨ã‚’è¡¨ã™ 'There are' æ§‹æ–‡ã§ã™ã€‚"
                    },
                    {
                        top: "20%", left: "37%", width: "30%", height: "60%", color: "#27ae60",
                        title: "Tea Selection",
                        eng: "In the middle, we see a variety of teas: citrus green tea and milk tea.",
                        jp: "ä¸­å¤®ã«ã¯ã€ã‚·ãƒ¼ã‚¯ãƒ®ãƒ¼ã‚µãƒ¼ç·‘èŒ¶ã‚„ãƒŸãƒ«ã‚¯ãƒ†ã‚£ãƒ¼ãªã©ã€æ§˜ã€…ãªç´…èŒ¶ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚",
                        vocab: ["variety (ç¨®é¡)", "citrus (æŸ‘æ©˜é¡)"],
                        idioms: ["cup of tea (å¥½ã¿)"],
                        synonyms: ["assortment (variety)"],
                        grammar: "åè©ã®åˆ—æŒ™ï¼ˆA and Bï¼‰ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚"
                    },
                    {
                        top: "20%", left: "68%", width: "30%", height: "60%", color: "#2c3e50",
                        title: "Black Coffee",
                        eng: "Two bottles of black coffee are lined up on the right side.",
                        jp: "å³å´ã«ã¯ãƒ–ãƒ©ãƒƒã‚¯ã‚³ãƒ¼ãƒ’ãƒ¼ã®ãƒœãƒˆãƒ«ãŒ2æœ¬ä¸¦ã‚“ã§ã„ã¾ã™ã€‚",
                        vocab: ["line up (ä¸¦ã¶)", "black coffee (ãƒ–ãƒ©ãƒƒã‚¯)"],
                        idioms: ["wake up call (è­¦é˜/ç›®è¦šã‚)"],
                        synonyms: ["align (line up)"],
                        grammar: "å—å‹•æ…‹ 'are lined up' ã§ã€Œä¸¦ã¹ã‚‰ã‚Œã¦ã„ã‚‹ã€çŠ¶æ…‹ã‚’è¡¨ã—ã¾ã™ã€‚"
                    }
                ]
            },
            {
                imageFile: "006.png", 
                spots: [
                    {
                        top: "20%", left: "18%", width: "15%", height: "60%", color: "#3498db",
                        title: "Sports Drink",
                        eng: "The blue bottle is a sports drink, designed for hydration.",
                        jp: "é’ã„ãƒœãƒˆãƒ«ã¯ã‚¹ãƒãƒ¼ãƒ„ãƒ‰ãƒªãƒ³ã‚¯ã§ã€æ°´åˆ†è£œçµ¦ã®ãŸã‚ã«ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚",
                        vocab: ["hydration (æ°´åˆ†è£œçµ¦)", "design (è¨­è¨ˆã™ã‚‹)"],
                        idioms: ["quench one's thirst (æ¸‡ãã‚’ç™’ã‚„ã™)"],
                        synonyms: ["beverage (drink)"],
                        grammar: "éå»åˆ†è© 'designed' ãŒå½¢å®¹è©çš„ã«ä¿®é£¾ã—ã¦ã„ã¾ã™ã€‚"
                    },
                    {
                        top: "30%", left: "82%", width: "15%", height: "50%", color: "#f1c40f",
                        title: "Energy Drink",
                        eng: "The small red and yellow can on the far right is an energy drink.",
                        jp: "å³ç«¯ã«ã‚ã‚‹èµ¤ã¨é»„è‰²ã®å°ã•ãªç¼¶ã¯ã‚¨ãƒŠã‚¸ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã§ã™ã€‚",
                        vocab: ["energy drink (ã‚¨ãƒŠã‚¸ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯)", "can (ç¼¶)"],
                        idioms: ["boost of energy (å…ƒæ°—ãŒå‡ºã‚‹)"],
                        synonyms: ["stimulant (energy booster)"],
                        grammar: "é•·ã„ä¸»èª 'The...can' ã«å¯¾ã™ã‚‹å‹•è© 'is' ã§ã™ã€‚"
                    },
                    {
                        top: "75%", left: "5%", width: "90%", height: "15%", color: "#2ecc71",
                        title: "Price Tags",
                        eng: "The prices range from 140 yen to 180 yen.",
                        jp: "ä¾¡æ ¼ã¯140å††ã‹ã‚‰180å††ã®ç¯„å›²ã§ã™ã€‚",
                        vocab: ["range (ç¯„å›²ã«åŠã¶)", "price tag (å€¤æœ­)"],
                        idioms: ["bang for your buck (ã‚³ã‚¹ãƒ‘ãŒè‰¯ã„)"],
                        synonyms: ["cost (price)"],
                        grammar: "å‹•è© 'range' ã‚’ä½¿ã„ã€'from A to B' ã§ç¯„å›²ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚"
                    }
                ]
            }
        ];

        // ============================================
        // â˜…ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚¸ãƒƒã‚¯
        // ============================================

        // èª¬æ˜æ–‡ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function toggleMethod() {
            const box = document.getElementById('method-box');
            box.style.display = (box.style.display === 'block') ? 'none' : 'block';
        }

        // åˆæœŸè¡¨ç¤º
        window.onload = function() {
            renderCategory(0);
        };

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderCategory(hundredsDigit) {
            document.querySelectorAll('.genre-btn').forEach((btn, idx) => {
                if(idx === hundredsDigit) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            const list = galleryData.filter(item => {
                const match = item.imageFile.match(/(\d+)/);
                const num = match ? parseInt(match[1], 10) : 0;
                return Math.floor(num / 100) === hundredsDigit;
            });

            const container = document.getElementById('gallery-list');
            container.innerHTML = '';

            if (list.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:rgba(255,255,255,0.7); padding:40px;">No images in this series yet.</p>';
                return;
            }

            list.forEach((data, index) => {
                const match = data.imageFile.match(/(\d+)/);
                const fileNum = match ? match[1] : "---";
                const cardID = `card-${index}`;

                const article = document.createElement('article');
                article.className = 'photo-card';
                // â˜…â˜…â˜… ä¿®æ­£: èª¬æ˜ãƒœãƒƒã‚¯ã‚¹å†…ã«èª­ã¿ä¸Šã’ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  â˜…â˜…â˜…
                article.innerHTML = `
                    <div class="card-header">
                        <span class="card-number">No. ${fileNum}</span>
                        <button class="toggle-frame-btn" onclick="toggleLocalFrames('${cardID}', this)">
                            Show Frames
                        </button>
                    </div>
                    <div class="image-wrapper" id="${cardID}-wrapper">
                        <img src="${data.imageFile}" class="main-image" alt="Gallery Image ${fileNum}">
                    </div>
                    <div class="desc-box" id="${cardID}-desc">
                        <span class="desc-title">Title</span>
                        
                        <div class="speak-container">
                            <div class="eng-text">English...</div>
                            <button class="speak-btn" aria-label="Read aloud" title="Read aloud">ğŸ”Š</button>
                        </div>

                        <div class="jp-text">Japanese...</div>
                        <div class="learning-grid">
                            <div class="learn-item"><h4>Vocabulary</h4><ul class="l-vocab"></ul></div>
                            <div class="learn-item"><h4>Idioms</h4><ul class="l-idiom"></ul></div>
                            <div class="learn-item"><h4>Synonyms</h4><ul class="l-synonym"></ul></div>
                            <div class="learn-item"><h4>Grammar</h4><div class="l-grammar" style="font-size:0.9rem; color:#444;"></div></div>
                        </div>
                    </div>
                `;
                // â˜…â˜…â˜… ã“ã“ã¾ã§ â˜…â˜…â˜…

                const wrapper = article.querySelector('.image-wrapper');
                data.spots.forEach(spot => {
                    const div = document.createElement('div');
                    div.className = 'hotspot';
                    Object.assign(div.style, { 
                        top: spot.top, left: spot.left, 
                        width: spot.width, height: spot.height, 
                        borderColor: spot.color 
                    });
                    div.onclick = (e) => {
                        e.stopPropagation();
                        updateDescription(cardID, spot);
                    };
                    wrapper.appendChild(div);
                });

                container.appendChild(article);
            });
        }

        // å€‹åˆ¥ã‚«ãƒ¼ãƒ‰ã®æ è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function toggleLocalFrames(cardID, btn) {
            const wrapper = document.getElementById(`${cardID}-wrapper`);
            const spots = wrapper.querySelectorAll('.hotspot');
            const descBox = document.getElementById(`${cardID}-desc`);

            let isHidden = (spots[0].style.display === 'none' || spots[0].style.display === '');
            spots.forEach(s => s.style.display = isHidden ? 'block' : 'none');

            if (isHidden) {
                btn.textContent = "Hide Frames";
                btn.classList.add('active');
            } else {
                btn.textContent = "Show Frames";
                btn.classList.remove('active');
                descBox.style.display = 'none';
            }
        }

        // â˜…â˜…â˜… è¿½åŠ : ãƒ†ã‚­ã‚¹ãƒˆèª­ã¿ä¸Šã’é–¢æ•° (Web Speech API) â˜…â˜…â˜…
        function speakText(text) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel(); // ç¾åœ¨ã®èª­ã¿ä¸Šã’ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US'; // è‹±èªï¼ˆã‚¢ãƒ¡ãƒªã‚«ï¼‰ã«è¨­å®š
                utterance.rate = 1.0;     // æ¨™æº–é€Ÿåº¦
                speechSynthesis.speak(utterance);
            } else {
                alert("Sorry, your browser does not support text-to-speech.");
            }
        }

        // â˜…â˜…â˜… è¿½åŠ : ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ—¥æœ¬èªè¨³ã€Œ(...)ã€ã‚’é™¤å»ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•° â˜…â˜…â˜…
        function cleanText(textArray) {
            if (!textArray || textArray.length === 0) return "";
            // å„é …ç›®ã‹ã‚‰ (...) ã‚’ç©ºæ–‡å­—ã«ç½®æ›ã—ã€ã‚«ãƒ³ãƒã§é€£çµ
            return textArray.map(item => item.replace(/\s*\(.*?\)/g, '')).join(", ");
        }

        // å€‹åˆ¥ã‚«ãƒ¼ãƒ‰ã®èª¬æ˜æ›´æ–°
        function updateDescription(cardID, data) {
            const box = document.getElementById(`${cardID}-desc`);
            box.style.display = 'block';
            box.style.borderTopColor = data.color;

            box.querySelector('.desc-title').textContent = data.title;
            box.querySelector('.desc-title').style.color = data.color;
            box.querySelector('.eng-text').textContent = data.eng;
            box.querySelector('.jp-text').textContent = data.jp;
            box.querySelector('.l-grammar').textContent = data.grammar || "";

            // â˜…â˜…â˜… è¿½åŠ : èª­ã¿ä¸Šã’ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š â˜…â˜…â˜…
            const speakBtn = box.querySelector('.speak-btn');
            // ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦æ—¢å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
            const newSpeakBtn = speakBtn.cloneNode(true);
            speakBtn.parentNode.replaceChild(newSpeakBtn, speakBtn);

            newSpeakBtn.onclick = () => {
                // èª­ã¿ä¸Šã’ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’æ§‹ç¯‰ï¼ˆè‹±æ–‡ + Vocabulary + Idiomsï¼‰
                let textToRead = data.eng;
                
                const cleanVocab = cleanText(data.vocab);
                if (cleanVocab) textToRead += ". Vocabulary: " + cleanVocab + ".";
                
                const cleanIdioms = cleanText(data.idioms);
                if (cleanIdioms) textToRead += " Idioms: " + cleanIdioms + ".";

                speakText(textToRead);
            };
            // â˜…â˜…â˜… ã“ã“ã¾ã§ â˜…â˜…â˜…

            const fillList = (cls, items) => {
                const ul = box.querySelector(cls);
                ul.innerHTML = '';
                if(items && items.length > 0) {
                    items.forEach(txt => {
                        const li = document.createElement('li');
                        li.textContent = txt;
                        ul.appendChild(li);
                    });
                }
            };
            fillList('.l-vocab', data.vocab);
            fillList('.l-idiom', data.idioms);
            fillList('.l-synonym', data.synonyms);
        }

    </script>
</body>
</html>