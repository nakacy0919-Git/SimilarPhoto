<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning Gallery</title>
    <style>
        /* ========== ここはデザイン設定（触らなくてOK） ========== */
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: #f0f2f5; display: flex; flex-direction: column; align-items: center; padding: 20px; color: #333; }
        .container { position: relative; max-width: 800px; width: 100%; margin: 20px 0; }
        .main-image { width: 100%; display: block; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
        
        /* ジャンル選択ボタン */
        .genre-tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .genre-btn { padding: 8px 16px; border: 2px solid #4a90e2; background: white; color: #4a90e2; border-radius: 20px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .genre-btn:hover { background: #eef5ff; }
        .genre-btn.active { background: #4a90e2; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

        /* ホットスポット（枠） */
        .hotspot { position: absolute; cursor: pointer; border: 3px solid; background: rgba(255,255,255,0.1); transition: 0.3s; border-radius: 4px; display: none; }
        .hotspot:hover { background: rgba(255,255,255,0.3); box-shadow: 0 0 15px rgba(255,255,255,0.8); transform: scale(1.02); }

        /* ナビゲーション */
        .nav-controls { display: flex; gap: 15px; margin-bottom: 10px; align-items: center; }
        .nav-btn { padding: 10px 20px; cursor: pointer; background: #555; color: white; border: none; border-radius: 5px; font-weight: bold; transition: 0.2s;}
        .nav-btn:hover { background: #333; }
        .nav-btn:disabled { background: #ccc; cursor: not-allowed; }
        
        /* 学習コンテンツエリア */
        #desc-box { background: white; padding: 25px; border-radius: 12px; width: 100%; max-width: 800px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); display: none; border-left: 8px solid #ccc; margin-bottom: 50px; }
        .desc-title { font-weight: 800; font-size: 1.5em; display: block; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 10px;}
        .text-section { margin-bottom: 20px; }
        .eng-text { font-size: 1.2em; color: #222; margin-bottom: 8px; line-height: 1.6; }
        .jp-text { font-size: 0.95em; color: #666; }
        .learning-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; border-top: 1px dashed #ddd; padding-top: 20px; }
        @media (max-width: 600px) { .learning-grid { grid-template-columns: 1fr; } }
        .learn-item h4 { margin: 0 0 5px 0; font-size: 0.9em; text-transform: uppercase; color: #888; letter-spacing: 1px; }
        .learn-item ul { margin: 0; padding-left: 20px; }
        .learn-item li { margin-bottom: 4px; font-size: 0.95em; }
    </style>
</head>
<body>

    <h1>English Learning Gallery</h1>

    <div class="genre-tabs">
        <button class="genre-btn active" onclick="filterGenre(0)">Level 1 (000~)</button>
        <button class="genre-btn" onclick="filterGenre(1)">Level 2 (100~)</button>
        <button class="genre-btn" onclick="filterGenre(2)">Level 3 (200~)</button>
        <button class="genre-btn" onclick="filterGenre(3)">Level 4 (300~)</button>
    </div>

    <div class="nav-controls">
        <button class="nav-btn" onclick="changePage(-1)">&#10094; Prev</button>
        <span id="page-indicator" style="font-weight:bold; font-size:1.1em;">0 / 0</span>
        <button class="nav-btn" onclick="changePage(1)">Next &#10095;</button>
        <button class="nav-btn" onclick="toggleFrames()" style="background:#2ecc71; margin-left:auto;">枠を表示/非表示</button>
    </div>

    <div class="container" id="image-container">
        <img id="current-image" src="" class="main-image">
    </div>

    <div id="desc-box">
        <span class="desc-title" id="d-title"></span>
        <div class="text-section">
            <div id="d-eng" class="eng-text"></div>
            <div id="d-jp" class="jp-text"></div>
        </div>
        <div class="learning-grid">
            <div class="learn-item"><h4 style="color:#e67e22">Vocabulary</h4><ul id="list-vocab"></ul></div>
            <div class="learn-item"><h4 style="color:#2980b9">Idioms</h4><ul id="list-idiom"></ul></div>
            <div class="learn-item"><h4 style="color:#27ae60">Synonyms</h4><ul id="list-synonym"></ul></div>
            <div class="learn-item"><h4>Grammar</h4><div id="text-grammar" style="font-size:0.95em;"></div></div>
        </div>
    </div>

    <script>
        // ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
        // 【編集エリア】ここにデータを追加してください
        // ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲
        
       const galleryData = [
            // ============================================
            // Level 1: Basic Position (000 Series)
            // ============================================
            {
                imageFile: "001.png", 
                spots: [
                    {
                        // 中央：ペンギンのペア
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#3498db",
                        title: "Center: A Pair of Penguins",
                        eng: "Two penguins are standing side by side in the central cubby.",
                        jp: "中央の小部屋に2羽のペンギンが並んで立っています。",
                        vocab: ["cubby (棚の区画)", "side by side (並んで)", "central (中央の)"],
                        idioms: ["stick together (一緒にいる)"],
                        synonyms: ["duo (pair)"],
                        grammar: "位置を表す前置詞 'in' と、状態を表す現在進行形 'are standing' の組み合わせです。"
                    },
                    {
                        // 左下：ウサギ
                        top: "69%", left: "3%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Bottom-Left: A Solitary Rabbit",
                        eng: "A brown rabbit sits alone in the bottom-left section.",
                        jp: "茶色のウサギが左下の区画に一匹で座っています。",
                        vocab: ["solitary (単独の)", "section (区画)", "bottom-left (左下)"],
                        idioms: ["lone wolf (一匹狼)"],
                        synonyms: ["alone (solitary)"],
                        grammar: "場所を指す副詞句 'in the bottom-left section' が文末に来ています。"
                    }
                ]
            },
            {
                imageFile: "002.png", 
                spots: [
                    {
                        // 左：コアラ
                        top: "36%", left: "3%", width: "28%", height: "28%", color: "#95a5a6",
                        title: "Left: A Koala",
                        eng: "A grey koala is sitting to the left of the penguins.",
                        jp: "灰色のコアラがペンギンの左側に座っています。",
                        vocab: ["to the left of (～の左側に)", "grey (灰色の)"],
                        idioms: ["sit tight (じっとしている)"],
                        synonyms: ["beside (next to)"],
                        grammar: "相対的な位置関係を示す 'to the left of' がポイントです。"
                    },
                    {
                        // 中央：ペンギン（基準）
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#3498db",
                        title: "Center: Sandwiched Penguins",
                        eng: "The penguin pair is sandwiched between the koala and the dog.",
                        jp: "ペンギンのペアは、コアラと犬の間に挟まれています。",
                        vocab: ["sandwiched (挟まれた)", "between (～の間)"],
                        idioms: ["caught in the middle (板挟みになる)"],
                        synonyms: ["surrounded (enclosed)"],
                        grammar: "受動態 'is sandwiched' を使い、挟まれている状態を強調しています。"
                    },
                    {
                        // 右：犬
                        top: "36%", left: "69%", width: "28%", height: "28%", color: "#f1c40f",
                        title: "Right: A Golden Retriever",
                        eng: "A happy-looking dog sits on the far right side of the middle row.",
                        jp: "幸せそうな犬が、中段の右端に座っています。",
                        vocab: ["middle row (中段)", "far right (右端)"],
                        idioms: ["man's best friend (犬/人間の最良の友)"],
                        synonyms: ["canine (dog)"],
                        grammar: "複合形容詞 'happy-looking' (幸せそうな) が名詞 dog を修飾しています。"
                    }
                ]
            },
            {
                imageFile: "003.png", 
                spots: [
                    {
                        // 左上：猫
                        top: "3%", left: "3%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Top-Left: An Orange Tabby",
                        eng: "An orange tabby cat is sitting in the top-left compartment.",
                        jp: "オレンジ色のトラ猫が左上の区画に座っています。",
                        vocab: ["tabby (トラ猫)", "compartment (仕切り・区画)"],
                        idioms: ["cat nap (うたた寝)"],
                        synonyms: ["feline (cat)"],
                        grammar: "場所を特定する 'top-left' という表現です。"
                    },
                    {
                        // 上段中央：シマウマ
                        top: "3%", left: "36%", width: "28%", height: "28%", color: "#2c3e50",
                        title: "Top-Center: A Zebra",
                        eng: "A zebra stands next to the cat in the top row.",
                        jp: "最上段で、シマウマが猫の隣に立っています。",
                        vocab: ["top row (最上段)", "next to (～の隣に)"],
                        idioms: ["change one's stripes (性根を変える/通常否定形で使う)"],
                        synonyms: ["adjacent (next to)"],
                        grammar: "動詞 'stands' (立っている) と場所 'next to' の組み合わせ。"
                    },
                    {
                        // 右下：ウサギ
                        top: "69%", left: "69%", width: "28%", height: "28%", color: "#e74c3c",
                        title: "Bottom-Right: Diagonal Position",
                        eng: "The rabbit is placed in the bottom-right corner, far away from the others.",
                        jp: "ウサギは右下の隅に配置され、他の動物からは離れています。",
                        vocab: ["corner (隅)", "far away (遠く離れて)"],
                        idioms: ["miles away (心ここにあらず/遠く離れて)"],
                        synonyms: ["distant (far)"],
                        grammar: "受動態 'is placed' (配置されている) が使われています。"
                    }
                ]
            },
            {
                imageFile: "004.png", 
                spots: [
                    {
                        // 左上：シマウマ
                        top: "3%", left: "3%", width: "28%", height: "28%", color: "#2c3e50",
                        title: "Start: Top-Left",
                        eng: "The zebra starts the diagonal line from the top-left corner.",
                        jp: "シマウマが左上の隅から斜めのラインを始めています。",
                        vocab: ["diagonal (斜めの)", "line (線・列)"],
                        idioms: ["start off (始める)"],
                        synonyms: ["begin (start)"],
                        grammar: "能動態の 'starts' を使い、シマウマが列の始点であることを示しています。"
                    },
                    {
                        // 中央：猫
                        top: "36%", left: "36%", width: "28%", height: "28%", color: "#e67e22",
                        title: "Middle: Center Spot",
                        eng: "The cat occupies the exact center of the grid.",
                        jp: "猫がグリッドのちょうど中心を占めています。",
                        vocab: ["occupy (占める)", "exact (正確な/ちょうどの)", "grid (格子)"],
                        idioms: ["dead center (ど真ん中)"],
                        synonyms: ["inhabit (occupy)"],
                        grammar: "動詞 'occupy' は空間や地位を占める際によく使われます。"
                    },
                    {
                        // 右下：ウサギ
                        top: "69%", left: "69%", width: "28%", height: "28%", color: "#e74c3c",
                        title: "End: Bottom-Right",
                        eng: "The rabbit completes the diagonal alignment in the bottom-right.",
                        jp: "ウサギが右下で斜めの配置を完成させています。",
                        vocab: ["complete (完成させる)", "alignment (整列・配置)"],
                        idioms: ["tie up loose ends (結末をつける/仕上げる)"],
                        synonyms: ["finish (complete)"],
                        grammar: "主語(Rabbit) + 動詞(completes) + 目的語(alignment) の第3文型です。"
                    }
                ]
            },
            {
                imageFile: "005.png", 
                spots: [
                    {
                        // 左：コーラ2本
                        top: "20%", left: "5%", width: "30%", height: "60%", color: "#c0392b",
                        title: "Two Bottles of Cola",
                        eng: "There are two identical bottles of zero-sugar cola on the left.",
                        jp: "左側に、ゼロシュガーコーラの全く同じボトルが2本あります。",
                        vocab: ["identical (全く同じ)", "zero-sugar (無糖)", "bottle (ボトル)"],
                        idioms: ["seeing double (二重に見える)"],
                        synonyms: ["duplicate (copy)"],
                        grammar: "存在を表す 'There are' 構文です。"
                    },
                    {
                        // 中央：紅茶2種
                        top: "20%", left: "37%", width: "30%", height: "60%", color: "#27ae60",
                        title: "Tea Selection",
                        eng: "In the middle, we see a variety of teas: citrus green tea and milk tea.",
                        jp: "中央には、シークヮーサー緑茶やミルクティーなど、様々な紅茶が見られます。",
                        vocab: ["variety (多様性/種類)", "citrus (柑橘類)"],
                        idioms: ["cup of tea (好み/得意分野)"],
                        synonyms: ["assortment (variety)"],
                        grammar: "名詞の列挙（A and B）を使っています。"
                    },
                    {
                        // 右：ブラックコーヒー
                        top: "20%", left: "68%", width: "30%", height: "60%", color: "#2c3e50",
                        title: "Black Coffee",
                        eng: "Two bottles of black coffee are lined up on the right side.",
                        jp: "右側にはブラックコーヒーのボトルが2本並んでいます。",
                        vocab: ["line up (並ぶ)", "black coffee (ブラックコーヒー)"],
                        idioms: ["wake up call (警鐘/目覚め)"],
                        synonyms: ["align (line up)"],
                        grammar: "受動態 'are lined up' で「並べられている」状態を表します。"
                    }
                ]
            },
            {
                imageFile: "006.png", 
                spots: [
                    {
                        // 左から2番目：アクエリアス
                        top: "20%", left: "18%", width: "15%", height: "60%", color: "#3498db",
                        title: "Sports Drink",
                        eng: "The blue bottle is a sports drink, designed for hydration.",
                        jp: "青いボトルはスポーツドリンクで、水分補給のために作られています。",
                        vocab: ["hydration (水分補給)", "design (設計する/意図する)"],
                        idioms: ["quench one's thirst (渇きを癒やす)"],
                        synonyms: ["beverage (drink)"],
                        grammar: "過去分詞 'designed' が形容詞的に 'sports drink' を修飾しています。"
                    },
                    {
                        // 一番右：リアルゴールド
                        top: "30%", left: "82%", width: "15%", height: "50%", color: "#f1c40f",
                        title: "Energy Drink",
                        eng: "The small red and yellow can on the far right is an energy drink.",
                        jp: "右端にある赤と黄色の小さな缶はエナジードリンクです。",
                        vocab: ["energy drink (エナジードリンク)", "can (缶)"],
                        idioms: ["boost of energy (元気が出る)"],
                        synonyms: ["stimulant (energy booster)"],
                        grammar: "主語が長くなっていますが 'The...can' が主語、'is' が動詞です。"
                    },
                    {
                        // 全体：価格
                        top: "75%", left: "5%", width: "90%", height: "15%", color: "#2ecc71",
                        title: "Price Tags",
                        eng: "The prices range from 140 yen to 180 yen.",
                        jp: "価格は140円から180円の範囲です。",
                        vocab: ["range (範囲に及ぶ)", "price tag (値札)"],
                        idioms: ["bang for your buck (コスパが良い)"],
                        synonyms: ["cost (price)"],
                        grammar: "動詞 'range' を使い、'from A to B' で範囲を示しています。"
                    }
                ]
            }
        ];

        // ▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼▼
        // 【システムエリア】ここから下は触らないでください（自動で動きます）
        // ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲

        let currentList = [];
        let currentIndex = 0;
        let framesVisible = false;
        let currentGenre = 0;

        // 初期化：最初は000番台を表示
        window.onload = function() {
            filterGenre(0);
        };

        // ジャンル切り替え機能（ファイル名の数字を見て自動判別）
        function filterGenre(hundredsDigit) {
            currentGenre = hundredsDigit;
            
            // ボタンの見た目を更新
            document.querySelectorAll('.genre-btn').forEach((btn, idx) => {
                if(idx === hundredsDigit) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            // データの絞り込み（ファイル名に含まれる数字を解析）
            currentList = galleryData.filter(item => {
                // 数字を抽出（image.pngのように数字がない場合は0とみなす）
                const match = item.imageFile.match(/(\d+)/);
                const num = match ? parseInt(match[1], 10) : 0;
                
                // 100の位が一致するか確認
                // 0番台: 0-99, 1番台: 100-199 ...
                return Math.floor(num / 100) === hundredsDigit;
            });

            // リストが空の場合の対策
            if (currentList.length === 0) {
                // エラー回避用のダミー
                document.getElementById('image-container').innerHTML = '<p style="padding:20px;">このレベルの画像はまだありません。</p>';
                document.getElementById('desc-box').style.display = 'none';
                document.getElementById('page-indicator').textContent = "0 / 0";
                return;
            }

            currentIndex = 0;
            loadPage(currentIndex);
        }

        function loadPage(index) {
            if (index < 0) index = 0;
            if (index >= currentList.length) index = currentList.length - 1;
            currentIndex = index;

            const data = currentList[currentIndex];
            const container = document.getElementById('image-container');
            const img = document.getElementById('current-image');
            
            // 画像セット
            if(!img) {
                container.innerHTML = '<img id="current-image" src="" class="main-image">';
            }
            document.getElementById('current-image').src = data.imageFile;

            // 既存枠削除
            container.querySelectorAll('.hotspot').forEach(el => el.remove());
            document.getElementById('desc-box').style.display = 'none';
            framesVisible = false;

            // 枠生成
            data.spots.forEach(spot => {
                const div = document.createElement('div');
                div.className = 'hotspot';
                Object.assign(div.style, { top: spot.top, left: spot.left, width: spot.width, height: spot.height, borderColor: spot.color });
                div.onclick = (e) => { e.stopPropagation(); showText(spot); };
                container.appendChild(div);
            });

            // ページ番号更新
            document.getElementById('page-indicator').textContent = `${currentIndex + 1} / ${currentList.length}`;
        }

        function changePage(d) {
            if (currentList.length > 0) loadPage(currentIndex + d);
        }

        function toggleFrames() {
            framesVisible = !framesVisible;
            document.querySelectorAll('.hotspot').forEach(s => s.style.display = framesVisible ? 'block' : 'none');
            if(!framesVisible) document.getElementById('desc-box').style.display = 'none';
        }

        function showText(data) {
            const box = document.getElementById('desc-box');
            box.style.display = 'block';
            box.style.borderLeftColor = data.color;
            
            document.getElementById('d-title').textContent = data.title;
            document.getElementById('d-title').style.color = data.color;
            document.getElementById('d-eng').textContent = data.eng;
            document.getElementById('d-jp').textContent = data.jp;

            const makeList = (id, items) => {
                const ul = document.getElementById(id);
                ul.innerHTML = '';
                if(items && items.length > 0) {
                    items.forEach(txt => {
                        const li = document.createElement('li');
                        li.textContent = txt;
                        ul.appendChild(li);
                    });
                }
            };

            makeList('list-vocab', data.vocab);
            makeList('list-idiom', data.idioms);
            makeList('list-synonym', data.synonyms);
            
            const gDiv = document.getElementById('text-grammar');
            gDiv.textContent = data.grammar || "";
        }
    </script>
</body>
</html>